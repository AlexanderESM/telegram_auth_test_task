<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>üõ†Ô∏è –û—Ç–ª–∞–¥–∫–∞ Telegram WebApp</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: sans-serif;
            margin: 2em;
            background: #fafafa;
        }
        h1 { font-size: 1.5em; }
        pre {
            background: #f0f0f0;
            padding: 1em;
            border-radius: 5px;
            white-space: pre-wrap;
        }
        button {
            padding: 0.5em 1em;
            font-size: 1em;
            margin-top: 1em;
        }
    </style>
</head>
<body>
<h1>üõ†Ô∏è –û—Ç–ª–∞–¥–∫–∞ Telegram WebApp</h1>

<div id="output">
    –ó–∞–≥—Ä—É–∑–∫–∞...
</div>

<button onclick="location.reload()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>

<script>
    function showDebugInfo() {
        const initData = Telegram.WebApp.initData || "[–ø—É—Å—Ç–æ]";
        const cookie = document.cookie || "[cookie –ø—É—Å—Ç]";
        const now = new Date().toLocaleString();

        // –£—Å—Ç–∞–Ω–æ–≤–∏–º cookie, –µ—Å–ª–∏ initData –≤–∞–ª–∏–¥–µ–Ω –∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
        if (initData !== "[–ø—É—Å—Ç–æ]" && !document.cookie.includes("tg_init_data=")) {
            document.cookie = "tg_init_data=" + encodeURIComponent(initData)
                + "; path=/; SameSite=None; Secure";
        }

        document.getElementById("output").innerHTML = `
‚úÖ <b>Telegram.WebApp</b> –¥–æ—Å—Ç—É–ø–µ–Ω<br><br>
üïí <b>–í—Ä–µ–º—è:</b> ${now}<br><br>
üì¶ <b>initData:</b><br><pre>${initData}</pre><br>
üç™ <b>document.cookie:</b><br><pre>${cookie}</pre>
        `;
    }

    if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.ready();
        setTimeout(showDebugInfo, 300); // –¥–∞—ë–º WebApp –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è
    } else {
        document.getElementById("output").innerText = "‚ùå Telegram.WebApp –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω.";
    }
</script>
</body>
</html>
